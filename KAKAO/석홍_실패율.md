``` java
package codingTest.programmers.kakao.blind;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

public class FailureRate {
	public int[] solution(int N, int[] stages) {
		int[] answer = new int[N];

		Map<Integer, Integer> map = new HashMap<>();
		Map<Integer, Double> map2 = new LinkedHashMap<>();
		int userNum = stages.length;

		for (int i = 0; i < userNum; i++) {
			map.put(stages[i], map.getOrDefault(stages[i], 0) + 1);
		}

		for (int i = 1; i <= N; i++) {
			if (map.get(i) == null) {
				map2.put(i, 0.0); // 실패율 0
			} else {
				map2.put(i, map.get(i) / (double) userNum);
				userNum -= map.get(i); // 총 도전자 수 줄어듬.
			}
		}
		
		
		List<Entry<Integer, Double>> list = new ArrayList<>(map2.entrySet());
		list.sort((e1, e2)->{
			if(e1.getValue() < e2.getValue()) return 1;
			else if (e1.getValue().equals(e2.getValue())) {
				if(e1.getKey() < e2.getKey() ) return -1;
				else if(e1.getKey() > e2.getKey()) return 1;
				else return 0;
			}
			else return -1;
		});
		
		
		for(int i=0;i<answer.length; i++) {
			answer[i] = list.get(i).getKey();
		}
		
		return answer;
		
//		answer = map2.entrySet().stream().sorted((e1, e2)->{
//			if(e1.getValue() < e2.getValue()) return 1;
//			else if (e1.getValue().equals(e2.getValue())) {
//				if(e1.getKey() < e2.getKey() ) return -1;
//				else if(e1.getKey() > e2.getKey()) return 1;
//				else return 0;
//			}
//			else return -1;
//		}).mapToInt(entry->entry.getKey()).toArray();
//		
//		return answer;
	}
}
 
```  

풀이시간 : 2시간 오지게 어렵네.,,,,,,,,,,,  

## 성능
테스트 1 〉	통과 (3.43ms, 74.3MB)  
테스트 2 〉	통과 (3.62ms, 79.8MB)  
테스트 3 〉	통과 (19.32ms, 85.3MB)  
테스트 4 〉	통과 (33.54ms, 99.6MB)  
테스트 5 〉	통과 (41.89ms, 104MB)  
테스트 6 〉	통과 (8.13ms, 74.5MB)  
테스트 7 〉	통과 (11.16ms, 74.3MB)  
테스트 8 〉	통과 (30.52ms, 92MB)  
테스트 9 〉	통과 (38.85ms, 107MB)  
테스트 10 〉	통과 (22.22ms, 96.9MB)  
테스트 11 〉	통과 (24.71ms, 94.3MB)  
테스트 12 〉	통과 (25.66ms, 95.9MB)  
테스트 13 〉	통과 (39.39ms, 106MB)  
테스트 14 〉	통과 (3.32ms, 77.8MB)  
테스트 15 〉	통과 (18.01ms, 78MB)  
테스트 16 〉	통과 (9.60ms, 76.2MB)  
테스트 17 〉	통과 (15.32ms, 89.6MB)  
테스트 18 〉	통과 (9.71ms, 78.1MB)  
테스트 19 〉	통과 (4.85ms, 79.7MB)  
테스트 20 〉	통과 (11.69ms, 78MB)  
테스트 21 〉	통과 (17.98ms, 80.7MB)  
테스트 22 〉	통과 (47.61ms, 106MB)  
테스트 23 〉	통과 (26.68ms, 96.8MB)  
테스트 24 〉	통과 (24.79ms, 83.3MB)  
테스트 25 〉	통과 (3.16ms, 75.5MB)   
테스트 26 〉	통과 (3.03ms, 76.4MB)  
테스트 27 〉	통과 (2.96ms, 76.6MB)   
 
#### Stream 이용 안한 풀이, 2배이상 차이남
테스트 1 〉	통과 (1.13ms, 71MB)  
테스트 2 〉	통과 (1.39ms, 75MB)  
테스트 3 〉	통과 (11.47ms, 80.2MB)  
테스트 4 〉	통과 (23.42ms, 91.5MB)  
테스트 5 〉	통과 (37.11ms, 96.1MB)  
테스트 6 〉	통과 (2.45ms, 73.5MB)  
테스트 7 〉	통과 (4.54ms, 77MB)  
테스트 8 〉	통과 (21.46ms, 95.6MB)  
테스트 9 〉	통과 (33.78ms, 106MB)  
테스트 10 〉	통과 (21.34ms, 91.1MB)  
테스트 11 〉	통과 (30.74ms, 93.5MB)  
테스트 12 〉	통과 (21.21ms, 95.2MB)  
테스트 13 〉	통과 (30.78ms, 99MB)  
테스트 14 〉	통과 (1.20ms, 73MB)  
테스트 15 〉	통과 (14.37ms, 81.2MB)  
테스트 16 〉	통과 (7.17ms, 85.8MB)  
테스트 17 〉	통과 (13.54ms, 78.7MB)  
테스트 18 〉	통과 (7.44ms, 72.6MB)  
테스트 19 〉	통과 (3.00ms, 77.7MB)  
테스트 20 〉	통과 (10.42ms, 83.9MB)  
테스트 21 〉	통과 (18.51ms, 87.9MB)  
테스트 22 〉	통과 (36.02ms, 118MB)  
테스트 23 〉	통과 (23.15ms, 91.8MB)  
테스트 24 〉	통과 (22.67ms, 85.1MB)  
테스트 25 〉	통과 (0.99ms, 73.7MB)  
테스트 26 〉	통과 (0.90ms, 73.8MB)  
테스트 27 〉	통과 (0.95ms, 75.9MB)  
