```java
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

class Solution {
    final String ENTER_MSG = "님이 들어왔습니다.";
    final String LEAVE_MSG = "님이 나갔습니다.";
    final String E = "Enter";
    final String L = "Leave";
    final String C = "Change";

    public String[] solution(String[] record) {
        String[] answer = null;
        List<Map<String,String>> msgList = new ArrayList<>();
        Map<String, String> idThenNick = new HashMap<>();
        int idx = 0;

        for(String data : record){
            String[] dataArr = data.split(" ");

            if(!dataArr[0].equals(L)){
                idThenNick.put(dataArr[1], dataArr[2]);
            }

            if(!dataArr[0].equals(C)){
                Map<String, String> tempMap = new HashMap<>();
                tempMap.put(dataArr[1], dataArr[0].equals(E) ? ENTER_MSG : LEAVE_MSG);
                msgList.add(tempMap);
            }
        }

        answer = new String[msgList.size()];

        for(Map<String, String> map : msgList){
            for(String id : map.keySet()){
                answer[idx++] = idThenNick.get(id) + map.get(id);
            }
        }

        return answer;
    }
}
```
![image](https://github.com/koreaIT-study/programmers/assets/92290312/374d2680-3b9d-4854-b8ae-7d237f56b375)
